(()=>{"use strict";const t=[{id:26,title:"Побег из Шоушенка",imdb:9.3,year:1994},{id:25,title:"Крёстный отец",imdb:9.2,year:1972},{id:27,title:"Крёстный отец 2",imdb:9,year:1974},{id:1047,title:"Тёмный рыцарь",imdb:9,year:2008},{id:223,title:"Криминальное чтиво",imdb:8.9,year:1994}];const e=document.querySelector("tbody"),i=new class{constructor(e){this.table=e,this.data=t,this.sort=[],this.valuesForSorting=[]}init(){this.redrawTable(this.data),this.tHeader=document.querySelectorAll("th"),[...this.tHeader].forEach((t=>this.valuesForSorting.push(t.textContent))),this.displayValue(this.valuesForSorting,0)}redrawTable(t){t.forEach((t=>{const e=`\n<tr class="movie">\n\t\t\t\t<td>${t.id}</td>\n\t\t\t\t<td>${t.title}</td>\n\t\t\t\t<td>(${t.year})</td>\n\t\t\t\t<td>imdb: ${t.imdb.toFixed(2)}</td>\n\t\t\t</tr>`;this.table.insertAdjacentHTML("beforeend",e)}))}sortValues(t){return this.sort="title"===t?this.data.sort(((t,e)=>e.title>t.title?1:e.title<t.title?-1:void 0)):[...this.data].sort(((e,i)=>Number(i[t])-Number(e[t]))),this.sort}refresh(){this.redrawList(),this.sort=this.sort.reverse(),setTimeout((()=>{this.redrawList(this.sort)}),2e3)}redrawList(){this.movie=document.querySelectorAll(".movie");const t=[...this.tHeader].find((t=>t.firstElementChild.classList.contains("triangle-up")));t&&(t.firstElementChild.style.transform="rotate(180deg)"),this.movie.forEach((t=>{document.querySelector("tbody").removeChild(t)})),this.redrawTable(this.sort)}triangle(t){[...this.tHeader].forEach((t=>{t.firstElementChild.classList.remove("triangle-up"),t.firstElementChild.style.transform=""}));[...this.tHeader].find((e=>e.textContent===t)).firstElementChild.classList.add("triangle-up")}displayValue(t,e){if(e<t.length){const i=setTimeout((()=>{e<t.length&&(this.sortValues(t[e]),this.refresh(),this.triangle(t[e]),this.displayValue(t,[++e]),e===t.length&&(clearTimeout(i),e=0,this.displayValue(t,0)))}),4e3)}}}(e);i.init()})();